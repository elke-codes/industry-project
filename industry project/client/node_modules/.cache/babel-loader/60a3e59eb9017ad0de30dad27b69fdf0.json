{"ast":null,"code":"var _jsxFileName = \"/home/elke/code/brainstation/PROJECTS/industry-project/client/src/components/Chat/client/Chat.jsx\",\n    _s = $RefreshSig$();\n\n// Thanks to PedroTech for guiding me through my first socket.io experience!\n// Basic app functionality created by following their tutorial on // https://www.youtube.com/watch?v=NU-HfZY3ATQ\nimport React, { useEffect, useState } from \"react\"; //...uses library, can do this myself?\n\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport sendIcon from \"../client/send-icon.svg\"; //...socket needs to be passed down as a prop\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Chat = _ref => {\n  _s();\n\n  let {\n    socket,\n    userName,\n    room\n  } = _ref;\n  //keep track of message\n  const [currentMessage, setCurrentMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]); //allow messages to be sent through socket\n  //async because you want to wait for the state to be set\n  //...can do with useEffect listening to the currentMessage to change?\n\n  const sendMessage = async () => {\n    if (currentMessage !== \"\") {\n      const messageData = {\n        room: room,\n        author: userName,\n        message: currentMessage,\n        time: new Date(Date.now()).getHours() + \":\" + new Date(Date.now()).getMinutes()\n      }; //see index.js for listener listening to \"send_message\"\n      //send the message data to the backend after the current message has been changed\n\n      await socket.emit(\"send_message\", messageData); //to send message to both, update both messaglists\n\n      setMessageList(list => [...list, messageData]); //empty the container after sending the message\n\n      setCurrentMessage(\"\");\n    }\n  }; // listen to whenever there s changes to our socket server\n\n\n  useEffect(() => {\n    //listen for event emitted from server \"receive_message\", receive data sent from backend\n    socket.on(\"receive_message\", data => {\n      console.log(data); //grab current/previous messagelist, return that with the message added\n\n      setMessageList(list => [...list, data]);\n    });\n  }, [socket]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chat-window\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Live Chat\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-body\",\n      children: /*#__PURE__*/_jsxDEV(ScrollToBottom, {\n        className: \"message-container\",\n        children: messageList.map(messageContent => {\n          {\n            /* where messagecontent is the data received back from the server  */\n          }\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message\" // check who is the autor of the message, it it s the one sending it , it s you lol, otherwise it s the other\n            ,\n            id: userName === messageContent.author ? \"you\" : \"other\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-content\",\n                children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: messageContent.message\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 76,\n                  columnNumber: 11\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 74,\n                columnNumber: 10\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-meta\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\" \", /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"time\",\n                    children: messageContent.time\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 12\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"author\",\n                    children: messageContent.author\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 84,\n                    columnNumber: 12\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 79,\n                  columnNumber: 11\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 78,\n                columnNumber: 10\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 73,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 8\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-footer\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: currentMessage,\n        placeholder: \"Write a message...\",\n        onChange: e => {\n          setCurrentMessage(e.target.value);\n        } //if the key pressed is enter send the message\n        ,\n        onKeyPress: e => {\n          e.key === \"Enter\" && sendMessage();\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: sendMessage,\n        children: sendIcon\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Chat, \"gDKz+24cg75HOdfXSFFmVy0ndt0=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/elke/code/brainstation/PROJECTS/industry-project/client/src/components/Chat/client/Chat.jsx"],"names":["React","useEffect","useState","ScrollToBottom","sendIcon","Chat","socket","userName","room","currentMessage","setCurrentMessage","messageList","setMessageList","sendMessage","messageData","author","message","time","Date","now","getHours","getMinutes","emit","list","on","data","console","log","map","messageContent","e","target","value","key"],"mappings":"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","sourcesContent":["// Thanks to PedroTech for guiding me through my first socket.io experience!\n// Basic app functionality created by following their tutorial on // https://www.youtube.com/watch?v=NU-HfZY3ATQ\n\nimport React, { useEffect, useState } from \"react\";\n//...uses library, can do this myself?\nimport ScrollToBottom from \"react-scroll-to-bottom\";\nimport sendIcon from \"../client/send-icon.svg\";\n\n//...socket needs to be passed down as a prop\nconst Chat = ({ socket, userName, room }) => {\n\t//keep track of message\n\tconst [currentMessage, setCurrentMessage] = useState(\"\");\n\tconst [messageList, setMessageList] = useState([]);\n\n\t//allow messages to be sent through socket\n\t//async because you want to wait for the state to be set\n\t//...can do with useEffect listening to the currentMessage to change?\n\tconst sendMessage = async () => {\n\t\tif (currentMessage !== \"\") {\n\t\t\tconst messageData = {\n\t\t\t\troom: room,\n\t\t\t\tauthor: userName,\n\t\t\t\tmessage: currentMessage,\n\t\t\t\ttime:\n\t\t\t\t\tnew Date(Date.now()).getHours() +\n\t\t\t\t\t\":\" +\n\t\t\t\t\tnew Date(Date.now()).getMinutes()\n\t\t\t};\n\n\t\t\t//see index.js for listener listening to \"send_message\"\n\t\t\t//send the message data to the backend after the current message has been changed\n\n\t\t\tawait socket.emit(\"send_message\", messageData);\n\t\t\t//to send message to both, update both messaglists\n\t\t\tsetMessageList((list) => [...list, messageData]);\n\t\t\t//empty the container after sending the message\n\t\t\tsetCurrentMessage(\"\");\n\t\t}\n\t};\n\n\t// listen to whenever there s changes to our socket server\n\tuseEffect(() => {\n\t\t//listen for event emitted from server \"receive_message\", receive data sent from backend\n\t\tsocket.on(\"receive_message\", (data) => {\n\t\t\tconsole.log(data);\n\t\t\t//grab current/previous messagelist, return that with the message added\n\t\t\tsetMessageList((list) => [...list, data]);\n\t\t});\n\t}, [socket]);\n\n\treturn (\n\t\t<div className=\"chat-window\">\n\t\t\t<div className=\"chat-header\">\n\t\t\t\t<p>Live Chat</p>\n\t\t\t</div>\n\t\t\t{/* where messagecontent is the data received back from the server  */}\n\t\t\t<div className=\"chat-body\">\n\t\t\t\t{/* wrap whatever you r mapping in the scrolltobottom and set a height on it, in this case the height will be the same as the message-container */}\n\t\t\t\t<ScrollToBottom className=\"message-container\">\n\t\t\t\t\t{messageList.map((messageContent) => {\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t/* where messagecontent is the data received back from the server  */\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"message\"\n\t\t\t\t\t\t\t\t// check who is the autor of the message, it it s the one sending it , it s you lol, otherwise it s the other\n\t\t\t\t\t\t\t\tid={\n\t\t\t\t\t\t\t\t\tuserName === messageContent.author\n\t\t\t\t\t\t\t\t\t\t? \"you\"\n\t\t\t\t\t\t\t\t\t\t: \"other\"\n\t\t\t\t\t\t\t\t}>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"message-content\">\n\t\t\t\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t\t\t\t<p>{messageContent.message}</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"message-meta\">\n\t\t\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t\t\t{\" \"}\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"time\">\n\t\t\t\t\t\t\t\t\t\t\t\t{messageContent.time}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t\t<p className=\"author\">\n\t\t\t\t\t\t\t\t\t\t\t\t{messageContent.author}\n\t\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t);\n\t\t\t\t\t})}\n\t\t\t\t</ScrollToBottom>\n\t\t\t</div>\n\t\t\t<div className=\"chat-footer\">\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tvalue={currentMessage}\n\t\t\t\t\tplaceholder=\"Write a message...\"\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetCurrentMessage(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t\t//if the key pressed is enter send the message\n\t\t\t\t\tonKeyPress={(e) => {\n\t\t\t\t\t\te.key === \"Enter\" && sendMessage();\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t\t<button onClick={sendMessage}>{sendIcon}</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nexport default Chat;\n"]},"metadata":{},"sourceType":"module"}